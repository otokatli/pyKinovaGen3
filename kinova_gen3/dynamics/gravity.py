"""Gravity term for Kinova Gen3 robot

Functions
---------
gravity(joint_position)

"""

import math
import numpy


def gravity(q):
    """The gravity term of the Kinova Gen3 robot

    Arguments
    ---------
    joint_position (array_like): The joint angles of the robot [rad]

    Returns
    -------
    ndarray: The gravity term of the robot

    """

    # Gravity acceleration constant [m/s^2]
    gravity_acceleration = 9.80665

    # q1 = q[0]
    q2 = q[1]
    q3 = q[2]
    q4 = q[3]
    q5 = q[4]
    q6 = q[5]
    q7 = q[6]

    x0 = q3
    x1 = math.cos(x0)
    x2 = q2
    x3 = math.sin(x2)
    x4 = x1 * x3
    x5 = math.cos(x2)
    x6 = 0.017767125 * x5
    x7 = math.sin(x0)
    x8 = x3 * x7
    x9 = 1.1636 * x5
    x10 = q4
    x11 = math.sin(x10)
    x12 = x11 * x5
    x13 = 0.20843 * x1
    x14 = math.cos(x10)
    x15 = x14 * x3
    x16 = x14 * x5
    x17 = x11 * x4
    x18 = -x16 + x17
    x19 = x1 * x14
    x20 = x19 * x3
    x21 = 1.8e-5 * x1
    x22 = 0.075478 * x1
    x23 = 0.9302 * x8
    x24 = 0.9302 * x18
    x25 = -x12 - x20
    x26 = 0.9302 * x25
    x27 = 1.8568 * x25
    x28 = q5
    x29 = math.cos(x28)
    x30 = math.sin(x28)
    x31 = x30 * x7
    x32 = x19 * x29 - x31
    x33 = 0.00017505 * x3
    x34 = 1.1787 * x18
    x35 = 0.10593 * x29
    x36 = 0.10593 * x3
    x37 = x29 * x7
    x38 = x3 * x37
    x39 = x25 * x30
    x40 = x38 - x39
    x41 = 1.1787 * x40
    x42 = 0.063883 * x29
    x43 = 0.063883 * x3
    x44 = 0.6781 * x40
    x45 = x12 * x30
    x46 = 0.10593 * x45
    x47 = x19 * x30
    x48 = -x37 - x47
    x49 = x3 * x31
    x50 = x25 * x29
    x51 = x49 + x50
    x52 = 1.1787 * x51
    x53 = 0.6781 * x51
    x54 = 1.0e-6 * x45
    x55 = 0.009432 * x29
    x56 = 0.6781 * x18
    x57 = q6
    x58 = math.sin(x57)
    x59 = x14 * x58
    x60 = math.cos(x57)
    x61 = x11 * x60
    x62 = x29 * x61
    x63 = x5 * (x59 + x62)
    x64 = x11 * x58
    x65 = x14 * x60
    x66 = x29 * x65 - x64
    x67 = x1 * x66 - x31 * x60
    x68 = -x38 + x39
    x69 = 0.5006 * x68
    x70 = x18 * x60
    x71 = x51 * x58
    x72 = x70 - x71
    x73 = 0.5006 * x72
    x74 = x37 + x47
    x75 = x3 * x74
    x76 = x3 * x67
    x77 = 0.6781 * x72
    x78 = x29 * x64
    x79 = x5 * (x65 - x78)
    x80 = -x29 * x59 - x61
    x81 = x1 * x80 + x31 * x58
    x82 = x3 * x81
    x83 = x18 * x58
    x84 = x51 * x60
    x85 = x83 + x84
    x86 = 0.6781 * x85
    x87 = 0.5006 * x85
    x88 = 0.6781 * x68
    x89 = q7
    x90 = math.cos(x89)
    x91 = x59 * x90
    x92 = math.sin(x89)
    x93 = x30 * x92
    x94 = x29 * x90
    x95 = x60 * x94 - x93
    x96 = x11 * x95
    x97 = x5 * (x91 + x96)
    x98 = x29 * x92
    x99 = x30 * x90
    x100 = x60 * x99
    x101 = x100 + x98
    x102 = x14 * x95 - x64 * x90
    x103 = x1 * x102 - x101 * x7
    x104 = x68 * x90
    x105 = x85 * x92
    x106 = -x104 - x105
    x107 = 0.5006 * x106
    x108 = x59 * x92
    x109 = -x60 * x98 - x99
    x110 = x109 * x11
    x111 = x5 * (-x108 + x110)
    x112 = 0.011402 * x3
    x113 = x60 * x93
    x114 = -x113 + x94
    x115 = x109 * x14 + x64 * x92
    x116 = x3 * (x1 * x115 - x114 * x7)
    x117 = x68 * x92
    x118 = x85 * x90
    x119 = -x117 + x118
    x120 = 0.5006 * x119
    x121 = x7**2
    x122 = 0.7235081912 * x3
    x123 = x11 * x7
    x124 = x14 * x7
    x125 = x1 * x30
    x126 = 0.00017505 * x125
    x127 = 0.00017505 * x14
    x128 = 0.10593 * x125
    x129 = 0.10593 * x14
    x130 = 0.009432 * x30
    x131 = 0.009432 * x14
    x132 = 1.0e-6 * x29
    x133 = 1.0e-6 * x14
    x134 = x1 * x132 - x133 * x31
    x135 = x1 * x35 - x129 * x31
    x136 = x14 * x31
    x137 = x66 * x7
    x138 = x7 * x80
    x139 = 0.00965 * x125
    x140 = 0.045483 * x29
    x141 = x1 * x101
    x142 = x1 * x114
    x143 = x102 * x7
    x144 = x115 * x7
    x145 = 0.000281 * x58
    x146 = 0.011402 * x58
    x147 = x11 * x18
    x148 = x11 * x30
    x149 = 1.0e-6 * x148
    x150 = 0.10593 * x148
    x151 = x30 * x60
    x152 = 0.053028558 * x68
    x153 = x30 * x58
    x154 = 0.000281 * x60
    x155 = 0.011402 * x60
    x156 = 0.029798 * x58

    gravity_term = numpy.array(
        [
            [
                gravity_acceleration
                * (
                    0.58632906 * x1 * x3**2 * x7
                    + x107
                    * (
                        0.029798 * x103 * x3
                        - 0.000281 * x79
                        - 0.000281 * x82
                        + 0.029798 * x97
                    )
                    + x120
                    * (-0.029798 * x111 + x112 * x81 - 0.029798 * x116 + 0.011402 * x79)
                    + 1.8568 * x18 * (0.006375 * x12 + 0.006375 * x20)
                    - x23
                    * (-x11 * x21 * x3 - 0.075478 * x12 - x15 * x22 + 1.8e-5 * x16)
                    + x24 * (0.015006 * x12 + 0.015006 * x20 - 1.8e-5 * x8)
                    + x26 * (-0.015006 * x16 + 0.015006 * x17 + 0.075478 * x8)
                    + x27 * (-0.006375 * x16 + 0.006375 * x17 + 0.20843 * x8)
                    + x34 * (0.00017505 * x12 * x29 + x32 * x33)
                    - x4 * x6
                    - 2.787 * x4 * (-0.006375 * x5 + 0.21038 * x8)
                    - 1.1636 * x4 * (0.006641 * x5 + 0.117892 * x8)
                    + x41 * (x12 * x35 + x32 * x36)
                    + x44 * (x12 * x42 + 1.0e-6 * x16 - 1.0e-6 * x17 + x32 * x43)
                    + x52 * (-0.00017505 * x16 + 0.00017505 * x17 - x36 * x48 + x46)
                    + x53
                    * (0.009432 * x16 - 0.009432 * x17 - x43 * x48 + 0.063883 * x45)
                    + x56 * (-x12 * x55 - 0.009432 * x3 * x32 - 1.0e-6 * x3 * x48 + x54)
                    + x69 * (-x36 * x67 - 0.10593 * x63)
                    + x73 * (x33 * x67 + 0.00017505 * x63)
                    + x73
                    * (
                        -x103 * x112
                        + 0.000281 * x111
                        + 0.000281 * x116
                        - 0.011402 * x97
                    )
                    + x77 * (x54 + 0.00965 * x63 + 1.0e-6 * x75 + 0.00965 * x76)
                    - 1.8568 * x8 * (-0.20843 * x12 - x13 * x15)
                    + 1.1636 * x8 * (0.117892 * x4 - 4.4e-5 * x5)
                    + x86
                    * (0.045483 * x45 + 0.045483 * x75 - 0.00965 * x79 - 0.00965 * x82)
                    + x87 * (-x33 * x81 + x36 * x74 + x46 - 0.00017505 * x79)
                    + x88
                    * (-0.045483 * x63 - 0.045483 * x76 - 1.0e-6 * x79 - 1.0e-6 * x82)
                    - x9 * (-0.006641 * x4 - 4.4e-5 * x8)
                )
            ],
            [
                gravity_acceleration
                * (
                    -(x1**2) * x122
                    + x107
                    * (
                        -x125 * x145
                        + 0.000281 * x138
                        - 0.029798 * x141
                        - 0.029798 * x143
                    )
                    + x120
                    * (
                        x125 * x146
                        - 0.011402 * x138
                        + 0.029798 * x142
                        + 0.029798 * x144
                    )
                    - x121 * x122
                    - 0.387012824 * x121 * x15
                    - 0.0118371 * x124 * x18
                    - x23 * (1.8e-5 * x123 + 0.075478 * x124)
                    + x24 * (-0.015006 * x124 - x21)
                    + x26 * (-0.015006 * x123 + x22)
                    + x27 * (-0.006375 * x123 + x13)
                    - 0.946998516 * x3
                    + x34 * (-x126 - x127 * x37)
                    + x41 * (-x128 - x129 * x37)
                    + x44 * (1.0e-6 * x123 - 0.063883 * x125 - 0.063883 * x14 * x37)
                    + 5.11984e-5 * x5
                    + x52 * (-0.00017505 * x123 + x135)
                    + x53 * (x1 * x42 + 0.009432 * x123 - 0.063883 * x136)
                    + x56 * (x1 * x130 + x131 * x37 + x134)
                    + x6 * x7
                    + x69 * (x128 * x60 + 0.10593 * x137)
                    + x73 * (-x126 * x60 - 0.00017505 * x137)
                    + x73
                    * (
                        0.011402 * x141
                        - 0.000281 * x142
                        + 0.011402 * x143
                        - 0.000281 * x144
                    )
                    + x77 * (x134 - 0.00965 * x137 - x139 * x60)
                    + x86 * (x1 * x140 - 0.045483 * x136 + 0.00965 * x138 - x139 * x58)
                    + x87 * (-x126 * x58 + x135 + 0.00017505 * x138)
                    + x88
                    * (
                        -1.0e-6 * x125 * x58
                        + 0.045483 * x125 * x60
                        + 0.045483 * x137
                        + 1.0e-6 * x138
                    )
                    - x9 * (-4.4e-5 * x1 + 0.006641 * x7)
                )
            ],
            [
                gravity_acceleration
                * (
                    x107
                    * (
                        -0.000281 * x65
                        + 0.000281 * x78
                        + 0.029798 * x91
                        + 0.029798 * x96
                    )
                    + 0.124859691 * x11 * x29 * x40
                    + 0.387012824 * x11 * x8
                    + x120
                    * (
                        0.029798 * x108
                        - 0.029798 * x110
                        + 0.011402 * x65
                        - 0.011402 * x78
                    )
                    - 0.0257956812 * x14 * x25
                    + 0.000206331435 * x147 * x29
                    + 0.0257956812 * x147
                    - x23 * (-0.075478 * x11 + 1.8e-5 * x14)
                    + 0.0100396574 * x4
                    + x44 * (x11 * x42 + x133)
                    + x52 * (-x127 + x150)
                    + x53 * (x131 + 0.063883 * x148)
                    + x56 * (-x11 * x55 + x149)
                    + x69 * (-x35 * x61 - 0.10593 * x59)
                    + x73 * (0.00017505 * x59 + 0.00017505 * x62)
                    + x73
                    * (
                        -0.000281 * x108
                        + 0.000281 * x110
                        - 0.011402 * x91
                        - 0.011402 * x96
                    )
                    + x77 * (x149 + 0.00965 * x59 + 0.00965 * x62)
                    - 5.11984e-5 * x8
                    + x86 * (0.045483 * x148 - 0.00965 * x65 + 0.00965 * x78)
                    + x87 * (x150 - 0.00017505 * x65 + 0.00017505 * x78)
                    + x88 * (x132 * x64 - x140 * x61 - 0.045483 * x59 - 1.0e-6 * x65)
                )
            ],
            [
                gravity_acceleration
                * (
                    x107 * (-0.029798 * x100 - 0.000281 * x153 - 0.029798 * x98)
                    - 0.4572224596 * x12
                    + x120 * (-0.029798 * x113 + 0.011402 * x153 + 0.029798 * x94)
                    + x151 * x152
                    - 8.763003e-5 * x151 * x72
                    + 1.67436e-5 * x16
                    - 1.67436e-5 * x17
                    - 0.000206331435 * x18 * x30
                    - 0.4572224596 * x20
                    + 0.1681787533 * x29 * x51
                    - 0.1681787533 * x30 * x40
                    + x56 * (x130 + x132)
                    + x73 * (x154 * x93 + x155 * x99 - 0.000281 * x94 + 0.011402 * x98)
                    + x77 * (x132 - 0.00965 * x151)
                    + x86 * (x140 - 0.00965 * x153)
                    + x87 * (-0.00017505 * x153 + x35)
                    + x88 * (0.045483 * x151 - 1.0e-6 * x153)
                )
            ],
            [
                gravity_acceleration
                * (
                    x107 * (-x154 + x156 * x90)
                    + x120 * (x155 + x156 * x92)
                    - x152 * x58
                    + 6.781e-7 * x38
                    - 6.781e-7 * x39
                    + 0.006189507765 * x49
                    + 0.006189507765 * x50
                    + 0.00663129503 * x58 * x72
                    - 0.00663129503 * x60 * x85
                    + x73 * (-x145 * x92 - x146 * x90)
                    + x88 * (-0.045483 * x58 - 1.0e-6 * x60)
                )
            ],
            [
                gravity_acceleration
                * (
                    -0.0149168788 * x106 * x92
                    + 0.0149168788 * x119 * x90
                    + 6.781e-7 * x70
                    - 6.781e-7 * x71
                    + x73 * (-0.000281 * x90 + 0.011402 * x92)
                    + 0.0838705803 * x83
                    + 0.0838705803 * x84
                )
            ],
            [
                gravity_acceleration
                * (
                    0.0001406686 * x104
                    + 0.0001406686 * x105
                    - 0.0057078412 * x117
                    + 0.0057078412 * x118
                )
            ],
        ]
    ).flatten()

    return gravity_term
